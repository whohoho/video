<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test opus</title>
    <style>
      body { font-family: sans-serif; }
      .div_video_high { border: 1px solid; }
      .friend_div { 
        border: 4px solid;
        margin: 10px 10px 10px 10px;
        background-color: lightblue;
      }

    </style>
    <script type="text/javascript" src="../crypto.js"></script> -->
    <script type="module">
    import Module from "./opus.wasm.mod.mjs";
    console.log(Module);  
    const mymod = Module();
    document.m = mymod;
//    const o = new mymod.Opus;
//    const mymod = TestModule;
    console.log('mymod: ', mymod);  
    console.log(mymod.CalledRun);  
    console.log(mymod.setDelayFunction);  
    console.log(mymod.lerp);  
    console.log(mymod.Opus);  
    console.log(mymod.Opus);  


    </script>


<!--    <script type="text/javascript" src="opus/libopus.wasm.js"></script> -->
    <script> 
/* 
      // for the minimal runtime
      var Module = {};
    (async () => {
    console.log('instantiate function');
    const response = await fetch('opus.wasm.wasm');
    const module = await WebAssembly.compileStreaming(response);
    console.log('mod: ', module);
    Module['wasm'] = module;
    const wel = document.createElement('script');
    wel.src = './opus.wasm.js';
    document.body.appendChild(wel);
    })();
*/

/* for the non minimal runtime         var Module = {};

  Module['instantiateWasm'] = function(imports, successCb) {

    (async () => {
    console.log('instantiate function');
    const response = await fetch('opus.wasm.wasm');
    const module = await WebAssembly.compileStreaming(response);

    const instance = await WebAssembly.instantiate(module, imports);
    console.log(instance);
    console.log(instance);
    successCb(instance, module);
    })();

  }

*/


    </script>


    <script src="opustest.js" type="module"></script>
  
  </head>
  <body>
    <p>
      <fieldset>
	<legend>opus test</legend>
  <button id="start_test">Start test</button>
    <div id='testdiv'>testing.. </div>
      </fieldset>

    <!-- Demo code file: -->
    <script>
      //window.hush_onload();
    </script>

  </body>
</html>
